import{$ as u,$a as D,Aa as h,Ba as A,D as L,Dc as R,Ec as z,Hc as q,Ic as H,Ja as m,K as g,Kc as J,L as P,La as T,Yc as K,Za as j,_ as s,hb as v,ia as f,jc as x,ka as l,kb as G,kc as I,lb as b,lc as E,mb as M,mc as U,nb as d,nc as _,pb as F,pc as k,qb as C,sb as N,ta as n,ua as r,ub as S,va as c,vb as y,wb as V,xb as w,yb as B,zb as O}from"./chunk-D5OMBQK2.js";function re(i,e){i&1&&(n(0,"mat-error"),m(1," Account number is required "),r())}function ie(i,e){i&1&&(n(0,"mat-error"),m(1," Password is required "),r())}function oe(i,e){if(i&1&&(n(0,"div",7),m(1),r()),i&2){let W=A();s(),T(" ",W.errorMessage," ")}}var me=(()=>{let e=class e{constructor(a,t,o){this.fb=a,this.authService=t,this.router=o,this.errorMessage="",this.loginForm=this.fb.group({accountNumber:["",[d.required]],password:["",[d.required]]})}onSubmit(){if(this.loginForm.valid){let{accountNumber:a,password:t}=this.loginForm.value;this.authService.login(a,t).subscribe({next:o=>{o?(this.errorMessage="",alert("Login successful!"),this.router.navigate(["/dashboard"])):this.errorMessage="Invalid account number or password"},error:()=>{this.errorMessage="An error occurred during login. Please try again."}})}}isAccountNumberInvalid(){return this.loginForm.get("accountNumber")?.invalid&&this.loginForm.get("accountNumber")?.touched}isPasswordInvalid(){return this.loginForm.get("password")?.invalid&&this.loginForm.get("password")?.touched}onLogin(){this.onSubmit()}};e.\u0275fac=function(t){return new(t||e)(u(w),u(b),u(v))},e.\u0275cmp=g({type:e,selectors:[["app-login"]],decls:18,vars:5,consts:[[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Enter your account number","formControlName","accountNumber","required","","appAutoFocus",""],[4,"ngIf"],["matInput","","placeholder","Enter your password","formControlName","password","required","",3,"type"],["class","error-message",4,"ngIf"],["mat-raised-button","","color","primary","type","submit"],[1,"error-message"]],template:function(t,o){t&1&&(n(0,"mat-card")(1,"mat-card-title"),m(2,"Login"),r(),n(3,"mat-card-content")(4,"form",0),h("ngSubmit",function(){return o.onLogin()}),n(5,"mat-form-field",1)(6,"mat-label"),m(7,"Account Number"),r(),c(8,"input",2),f(9,re,2,0,"mat-error",3),r(),n(10,"mat-form-field",1)(11,"mat-label"),m(12,"Password"),r(),c(13,"input",4),f(14,ie,2,0,"mat-error",3),r(),f(15,oe,2,1,"div",5),n(16,"button",6),m(17,"Login"),r()()()()),t&2&&(s(4),l("formGroup",o.loginForm),s(5),l("ngIf",o.isAccountNumberInvalid()),s(4),l("type","password"),s(),l("ngIf",o.isPasswordInvalid()),s(),l("ngIf",o.errorMessage))},dependencies:[j,N,M,F,C,V,S,y,x,E,I,_,q,R,z],styles:["mat-card[_ngcontent-%COMP%]{max-width:400px;margin:50px auto}mat-form-field[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{color:red;margin-top:10px}"]});let i=e;return i})();var ue=(()=>{let e=class e{constructor(a,t,o){this.fb=a,this.authService=t,this.router=o,this.errorMessage="",this.registerForm=this.fb.group({accountNumber:["",[d.required]],name:["",[d.required]],password:["",[d.required,d.minLength(6)]]})}onSubmit(){if(this.registerForm.valid){let{accountNumber:a,name:t,password:o}=this.registerForm.value;this.authService.register(a,t,o).subscribe({next:()=>{this.errorMessage="",this.router.navigate(["/login"])},error:p=>{this.errorMessage="Registration failed. Account number may not be unique."}})}}isAccountNumberInvalid(){return this.registerForm.get("accountNumber")?.invalid&&this.registerForm.get("accountNumber")?.touched}isNameInvalid(){return this.registerForm.get("name")?.invalid&&this.registerForm.get("name")?.touched}isPasswordInvalid(){return this.registerForm.get("password")?.invalid&&this.registerForm.get("password")?.touched}onRegister(){if(this.registerForm.valid){let{accountNumber:a,name:t,password:o}=this.registerForm.value;this.authService.register(a,t,o).subscribe({next:()=>{alert("User registered successfully"),this.errorMessage="",this.router.navigate(["/login"])},error:p=>{console.error("Registration failed",p),this.errorMessage="Registration failed. Account number may not be unique or other error occurred."}})}else console.log("Form is invalid"),this.errorMessage="Please fill in all required fields correctly."}};e.\u0275fac=function(t){return new(t||e)(u(w),u(b),u(v))},e.\u0275cmp=g({type:e,selectors:[["app-register"]],decls:19,vars:2,consts:[[3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","placeholder","Enter an account number","formControlName","accountNumber"],["matInput","","placeholder","Enter your name","formControlName","name"],["matInput","","placeholder","Enter your password","formControlName","password",3,"type"],["mat-raised-button","","color","primary","type","submit"]],template:function(t,o){t&1&&(n(0,"mat-card")(1,"mat-card-title"),m(2,"Register"),r(),n(3,"mat-card-content")(4,"form",0),h("ngSubmit",function(){return o.onRegister()}),n(5,"mat-form-field",1)(6,"mat-label"),m(7,"Account Number"),r(),c(8,"input",2),r(),n(9,"mat-form-field",1)(10,"mat-label"),m(11,"Name"),r(),c(12,"input",3),r(),n(13,"mat-form-field",1)(14,"mat-label"),m(15,"Password"),r(),c(16,"input",4),r(),n(17,"button",5),m(18,"Register"),r()()()()),t&2&&(s(4),l("formGroup",o.registerForm),s(12),l("type","password"))},dependencies:[N,M,F,C,S,y,x,E,I,_,q,R],styles:["mat-card[_ngcontent-%COMP%]{max-width:400px;margin:50px auto}mat-form-field[_ngcontent-%COMP%]{width:100%}"]});let i=e;return i})();var ye=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=P({type:e}),e.\u0275inj=L({imports:[D,B,O,G,J,U,k,H,K]});let i=e;return i})();export{me as a,ue as b,ye as c};
